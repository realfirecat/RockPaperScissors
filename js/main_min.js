let links=document.querySelectorAll("a");for(let t of links)t.addEventListener("click",function(){console.log(t.getAttribute("choice"));let e=t.getAttribute("choice");fetch("http://localhost/rpc/api/NewRound.php?choice="+e,{}).then(t=>t.json()).then(t=>{console.log(t),"player"===t.gewonnen?swal("Gewonnen","","success"):"cpu"===t.gewonnen?swal("Verloren","","error"):swal("Unentschieden","","warning"),canvas()}).catch(t=>console.log(t))});function canvas(){fetch("http://localhost/rpc/api/Statistik.php").then(function(t){return t.json()}).then(function(t){myChart.data.datasets[0].data[0]=findAmountElement(t.data,"player"),myChart.data.datasets[0].data[1]=findAmountElement(t.data,"cpu"),myChart.data.datasets[0].data[2]=findAmountElement(t.data,"tie"),myChart.update()}).catch(function(t){console.log(t)})}function findAmountElement(t,e){let n=0;for(let a of t)null!==a.winner&&a.winner.toLowerCase()===e.toLowerCase()&&n++;return n}$(document).ready(function(){var t=$("#myTable").DataTable();let e=[];canvas(),setInterval(()=>{fetch("http://localhost/rpc/api/Statistik.php").then(function(t){return t.json()}).then(function(n){for(let a of n.data)e.includes(a.id)||(e.push(a.id),t.row.add([a.time,a.winner]).draw(!1))}).catch(function(t){console.log(t)})},1e3)});var ctx=document.getElementById("myChart").getContext("2d"),myChart=new Chart(ctx,{type:"pie",data:{labels:["User won","CPU won","Tie"],datasets:[{label:"% of wins / object",data:[1,1,1],backgroundColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]}});